# 同步与互斥

进程具有异步性的特征


## 同步与互斥的基本概念

- **同步(直接制约关系)**：用于协调进程之间的相互制约关系或工作次序
- **临界资源**：一个时间段内只允许一个进程使用的资源
- **互斥(间接制约关系)**：同一时间内只允许一个进程访问临界资源，其余进程陷入等待

### 对临界资源的互斥访问

```c++
do{
	entry section;    //进入区
	critical section; //临界区
	exit section;     //退出区
	remainder section;//剩余区
}while(true);
```

- **进入区**：设置*正在访问临界资源的标志*
- **临界区(临界段)**：访问临界资源
- **退出区**：解除*正在访问临界资源的标志*
- *剩余区*：代表中的其余部分

### 访问临界区的原则

- *空闲让进*：临界区空闲时，可以允许一个请求进入临界区的进程立即进入临界区；
- *忙则等待*：当已有进程进入临界区时，其他试图进入临界区的进程必须等待
- *有限等待*：对请求访问的进程，应保证能在有限时间内进入临界区（保证不会饥饿）；
- *让权等待*：当进程不能进入临界区时，应立即释放处理机，防止进程忙等待。

## 实现临界区互斥的基本方法

### 软件实现方式

#### 单标志法

**单标志法**：两个进程在访问完临界区后会把使用临界区的权限交给另一个进程，每个进程进入临界区的权限只能被另一个进程赋予
- 可以实现“同一时间最多只允许一个进程访问临界区”

```c++
int turn=0 // turn 表示当前允许进入临界区的进程号

void P1(){
	while(turn!=0);
	critical section;
	turn=1;
	remainder section;
}

void P2(){
	while(turn!=1);
	critical section;
	turn=0;
	remainder section;
}
```

#### 双标志法

#### 双标志后检查

#### Peterson算法


###