# 控制单元的外特性

![[images/Pasted image 20240306190720.png]]

## 输入信号

- 时钟：CU受时钟控制，一个时钟脉冲发一个操作命令或一组需要同时执行的操作命令
- 指令寄存器：$IR[OP]\to CU$，控制信号与操作码有关
- 标志：CU受标志控制
- 外来信号：如中断请求（INTR）、总线请求（HRQ）

## 输出信号

### CPU内的各种控制信号

- $R_i \to R_j$
- $(PC)+1\to PC$
- ALU 加减与或……

### 送至控制总线的信号

- 访问控制信号：$\overline{MREQ}$
- 访问IO/存储器的控制信号：$\overline{IO}/M$
- 读命令：$\overline{RD}$
- 写命令：$\overline{WR}$
- 中断响应信号：$INTA$
- 总线应答信号：$HLDA$

# 控制信号

## 不采用CPU内部总线的方式

![[images/Pasted image 20240306191946.png]]
以`ADD @X`为例

$C_i$：由CU所控制的控制电路

### 取指周期

- $PC\to^{C_0}MAR$
- $MAR\to^{C_1}M$
- $M\to^{C_2}MDR$
- $MDR\to^{C_3}IR$
- $IR[OP]\to^{C_4}CU$
- $(PC)+1\to PC$
![[images/Pasted image 20240306192702.png]]

### 间址周期

- $MDR[Ad]\to^{C_5}MAR$
- $MAR\to^{C_1}M$
- $M\to^{C_2}MDR$
![[images/Pasted image 20240306193513.png]]

### 执行周期

- $MDR\to^{C_5}MAR$
- $MAR\to^{C_1}M$
- $M\to^{C_2}MDR$
- $AC\to^{C_6}ALU$
- $MDR\to^{C_7}ALU$
- $控制信号\to ALU$
- $ALU\to^{C_8} AC$
![[images/Pasted image 20240306193950.png]]

## 采用CPU内部总线方式

![[images/Pasted image 20240306194925.png]]
以`ADD @X`为例

### 取指周期

- $\underset{PC_o}{PC}\to\underset{MAR_i}{MAR}\to 地址线\to M$
- $CU[1]\to M_R$
- $M\to 数据线\to MDR$
- $\underset{MDR_o}{MDR}\to\underset{IR_i}{IR}$
- $IR[OP]\to CU$
- $(PC)+1\to PC$
![[images/Pasted image 20240306195952.png]]

### 间址周期

- $\underset{MDR_o}{MDR}\to\underset{MAR_i}{MAR}\to 地址线\to M$
- $CU[1]\to M_R$
- $M\to 数据线\to MDR$
- $\underset{MDR_o}{MDR}\to \underset{IR_i}{IR}$

### 执行周期

- $\underset{IR_o}{IR}\to\underset{MAR_i}{MAR}\to 地址线\to M$
- $CU[1]\to M_R$
- $M\to 数据线\to MDR$
- $\underset{MDR_o}{MDR}\to \underset{Y_i}{Y}\to ALU$
- $\underset{ACC_o}{ACC} \to \underset{ALU_i}{ALU}$
- $(ACC)+(Y)\to Z$
- $\underset{Z_o}{Z}\to\underset{ACC_i}{ACC}$
![[images/Pasted image 20240306201025.png]]
